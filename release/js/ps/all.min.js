this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype;e._listeners=null,e.initialize=function(){},e.addEventListener=function(t,e){var i=this._listeners;i?this.removeEventListener(t,e):i=this._listeners={};var n=i[t];return n||(n=i[t]=[]),n.push(e),e},e.removeEventListener=function(t,e){var i=this._listeners;if(i){var n=i[t];if(n)for(var s=0,a=n.length;a>s;s++)if(n[s]==e){1==a?delete i[t]:n.splice(s,1);break}}},e.removeAllEventListeners=function(t){t?this._listeners&&delete this._listeners[t]:this._listeners=null},e.dispatchEvent=function(t,e){var i=!1,n=this._listeners;if(t&&n){"string"==typeof t&&(t={type:t}),t.target=e||this;var s=n[t.type];if(!s)return i;s=s.slice();for(var a=0,o=s.length;o>a;a++){var r=s[a];r instanceof Function?i=i||r.apply(null,[t]):r.handleEvent&&(i=i||r.handleEvent(t))}}return!!i},e.hasEventListener=function(t){var e=this._listeners;return!(!e||!e[t])},ps.EventDispatcher=t}(),this.ps=this.ps||{},function(){var t=function(t,e,i){this.initialize(t,e,i)};t.DOM_LOAD_INIT="onLoadEventDomLoadInit",t.XML_LOAD_INIT="onLoadEventXMLLoadInit",t.IMG_LOAD_FOR_LOADER_INIT="onLoadEventIMGLoadForLoaderInit",t.IMG_LOAD_INIT="onLoadEventIMGLoadInit",t.CONTENT_LOAD_INIT="onLoadEventContentLoadInit",t.LOADER_INIT="onLoadEventContentLoaderInit",t.CONTENT_START="onContentEventContentStart",t.CONTENTANIMATION_EVENT_START="onAnimationEventStart",t.CONTENTANIMATION_EVENT_BIG_BOX="onAnimationEventBigBox",t.CONTENTANIMATION_EVENT_FIRST_NEAR="onAnimationEventFirstNear",t.CONTENTANIMATION_EVENT_FIRST_MIDDLE="onAnimationEventFirstMiddle",t.CONTENTANIMATION_EVENT_FIRST_FAR="onAnimationEventFirstFar",t.CONTENTANIMATION_EVENT_CSS3_MOVE="onAnimationEventCSS3Move",t.CONTENTANIMATION_EVENT_TEXT="onAnimationEventText",t.CONTENTANIMATION_EVENT_SECOND="onAnimationEventSecond",t.dispatcher=null,t.d=null;var e=t.prototype;e.type=null,e.pre=null,e.now=null,e.initialize=function(t,e,i){this.type=t,this.pre=e,this.now=i},t.init=function(){t.dispatcher||(t.dispatcher=new ps.EventDispatcher,t.d=[],t.setUp())},t.reset=function(e,i){t.d[e].shift(),t.d[e].push(i)},t.dispatch=function(e,i){t.dispatcher.dispatchEvent(new ps.BroadCaster(e,t.d[i][0],t.d[i][1]))},t.addEventListener=function(e,i){t.dispatcher.addEventListener(e,i)},t.removeEventListener=function(e,i){t.dispatcher.removeEventListener(e,i)},t.callEvent=function(e,i,n){e[i](new ps.BroadCaster(i,t.d[n][0],t.d[n][1]))},t.setUp=function(){t.d[0]=[null,null],t.d[1]=[null,null]},t.INIT="onInitEvent",t.setInitScene=function(e){t.reset(0,e),t.dispatch(t.INIT,0)},t.getInitScene=function(){return t.d[0][1]},t.CONTENT_ANIM="onContentAnimationEvent",t.setContentAnim=function(e){t.reset(1,e),t.dispatch(t.CONTENT_ANIM,1)},t.getNowContentAnim=function(){return t.d[1][1]},t.getPreContentAnim=function(){return t.d[1][0]},ps.BroadCaster=t}(),this.ps=this.ps||{},function(){var t=function(){};t.create=function(t,e){var i=function(){var t=arguments.callee._target,e=arguments.callee._func;return e.apply(t,arguments)};return i._target=t,i._func=e,i},ps.Delegate=t}(),this.ps=this.ps||{},function(){var t=function(){};t.getLoadManifest=function(t,e){for(var i=t.getElementsByTagName("data")[0],n=[],s=i.getElementsByTagName(e).length,a=0;s>a;a++){var o=i.getElementsByTagName(e)[a],r=o.getAttributeNode("id").value,l=o.getAttributeNode("url").value;a==s-1&&(this._imgLastID=r);var h={};h.src=l,h.id=r,n.push(h)}return n},ps.XMLUtil=t}(),this.ps=this.ps||{},function(){var t=function(){};t.getPlusOrMinus=function(){var t=1;return createRandomNum(10)>5&&(t*=-1),t},t.createEvenNumber=function(t){return 0!=t%10%2&&(t+=1),t},t.createRandomNum=function(t){var e=Math.floor(Math.random()*t);return e},t.createRandomRange=function(t,e){var i=Math.floor(Math.random()*t)+e;return i},t.randomInRange=function(t,e){return t+(e-t)*Math.random()},t.getNumRank=function(t,e){var i=0;switch(e){case 1:i=t-10*Math.floor(.1*t);break;case 10:i=Math.floor(.1*t)%10;break;case 100:i=Math.floor(100*t)}return i},t.getRadian=function(t){return t/180*Math.PI},ps.MathUtils=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype;e._nowT=0,e._preT=0,e.initialize=function(){},e.getNowFPS=function(){var t=0,e=new Date;return this._nowT=e.getTime(),0==this._preT&&(this._preT=this._nowT),t=1e3*(1/(this._nowT-this._preT)),this._preT=this._nowT,t},e.getNowSpeedNumByFPS=function(t){var e=1;return e=t/this.getNowFPS()},ps.AnimationUtils=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype;t.initialize=function(){},e.preload=null,e._imgLastID=null,e._loadImgMax=0,e._loadImgCount=0,e._nowPercent=0,e.initialize=function(){this.preload=new createjs.LoadQueue(!1),this.preload.addEventListener("fileload",ps.Delegate.create(this,this.loadHandler)),this.preload.addEventListener("error",ps.Delegate.create(this,this.loadError))},e.loadStart=function(){var t=[{src:ps.DataMain.CONFIG_XML_URL,id:"configXML"}];this.preload.loadManifest(t)},e.stop=function(){null!=this.preload&&this.preload.close()},e.setNowPercent=function(){this._nowPercent=Math.floor(100*(this._loadImgCount/this._loadImgMax))},e.setXMLoadd=function(t){var e=ps.XMLUtil.getLoadManifest(t,"img");ps.DataMain.configXML=t,this._imgLastID=e[e.length-1].id,this._loadImgMax=e.length,this.preload.loadManifest(e)},e.setImgLoad=function(t){ps.DataMain.imgContainer[t.item.id]=t.result,this._loadImgCount++,this.setNowPercent(),"txtP"==t.item.id&&ps.Controller.setInitScene(ps.BroadCaster.IMG_LOAD_FOR_LOADER_INIT),this._imgLastID==t.item.id&&this.loadComp()},e.loadComp=function(){ps.Controller.setInitScene(ps.BroadCaster.IMG_LOAD_INIT)},e.loadHandler=function(t){switch(t.item.type){case"xml":this.setXMLoadd(t.result),ps.Controller.setInitScene(ps.BroadCaster.XML_LOAD_INIT);break;case"image":this.setImgLoad(t)}},e.loadError=function(){},e.getNowPercent=function(){return this._nowPercent},ps.LoadManager=t}(),this.ps=this.ps||{},function(){var t=function(){};t.CONFIG_XML_URL="assets/config.xml",t.configXML=null,t.imgContainer={},t.canvas=null,t.stage=null,t.stageHeight=null,t.stageWidth=null,t.FPS=0,ps.DataMain=t}(),this.ps=this.ps||{},function(){var t=function(){};t.setInitScene=function(t){ps.BroadCaster.setInitScene(t)},t.setContentAnimEvent=function(t){ps.BroadCaster.setContentAnim(t)},t.setBodyBgLine=function(){document.body.className="bgline"},t.stop2DContent=function(){createjs.Ticker.removeAllEventListeners()},ps.Controller=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype;t.init=function(){t.instance=new ps.Main},e._loadManager=null,e._loader=null,e._stage=null,e.initialize=function(){ps.DataMain.canvas=document.getElementById("cavas2DBase"),ps.DataMain.stage=new createjs.Stage(ps.DataMain.canvas),ps.DataMain.stageWidth=960,ps.DataMain.stageHeight=720,ps.DataMain.FPS=30,ps.BroadCaster.init(),ps.BroadCaster.addEventListener(ps.BroadCaster.INIT,ps.Delegate.create(this,this.onInit)),this.setLoadManager()},e.setLoadManager=function(){this._loadManager=new ps.LoadManager,this._loadManager.loadStart()},e.setLoader=function(){createjs.Tween.get(this,{loop:!1}).wait(300).call(ps.Delegate.create(this,this.setLoaderComp))},e.setLoaderComp=function(){this._loader=new ps.Loader,ps.DataMain.stage.addChild(this._loader),this._loader.setDisplay(this._loadManager)},e.createContent=function(){createjs.Ticker.useRAF=!0,createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",ps.Delegate.create(this,this.onTicker)),ps.Controller.setInitScene(ps.BroadCaster.CONTENT_LOAD_INIT)},e.onInit=function(t){switch(console.log(t.now),t.now){case ps.BroadCaster.IMG_LOAD_FOR_LOADER_INIT:this.setLoader();break;case ps.BroadCaster.IMG_LOAD_INIT:this.createContent();break;case ps.BroadCaster.LOADER_INIT:ps.Controller.setInitScene(ps.BroadCaster.CONTENT_START)}},e.onTicker=function(){ps.DataMain.stage.update()},e.setLoaderContent=function(t){this._loader=t},e.setContentBigbox=function(t){this._contentBigBox=t},ps.Main=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.Container;e.Container_initialize=e.initialize,e.initialize=function(){this.Container_initialize(),this.alpha=0,ps.BroadCaster.addEventListener(ps.BroadCaster.INIT,ps.Delegate.create(this,this.onInit))},e._centerX=0,e._centerY=0,e._loaderPercent=null,e._percent=0,e._percentCount=0,e._percentCountNum=1,e._loadCompFlg=!1,e._loadManager=null,e._text=null,e._textDot1=null,e._textDot2=null,e._textDot3=null,e._txtComp=null,e._textNum=3,e._animate=!1,e._mainTween=null,e._squreTweenThread=null,e._squreTweenNow=null,e._squreTweenPre=null,e._exclamationTween=null,e._txtCompTween=null,e._loadingSqureNow=null,e._loadingSqurePre=null,e._loadingExclamation=null,e._squreChnageNum=1,e._squreFirstScale=.5,e._mask=null,e._adjustY=-57,e._cubeScrollAnimFlg=!1,e._compAnimFlg=!1,e.startAnim=function(){this._animate=!0,this.squreAnimThread()},e.stopAnimation=function(){this._animate=!1},e.setDisplay=function(t){this._loadManager=t,this._centerX=Math.floor(.5*ps.DataMain.stageWidth),this._centerY=Math.floor(.5*ps.DataMain.stageHeight),this.createCubeSet(),this.createPercent(),this.createText(),this.createExclamation(),this.startAnim()},e.createCube=function(){var t=new createjs.SpriteSheet({animations:{first:[0,6,"first"],stop:[6,6],second:[7,9,"stop2"],stop2:[9,9]},images:[ps.DataMain.imgContainer.loadingSpriteSheet],frames:{width:58,height:58,regX:0,regY:0,count:10}}),e=new createjs.Sprite(t);e.addEventListener("animationend",ps.Delegate.create(this,this.onCubeRotateAnimationEnd));var i=new createjs.Container;return this.addChild(i),e.x=-29,i.addChild(e),e.gotoAndPlay("first"),i.x=-27+this._centerX+29,i.y=-56+this._centerY+29,i},e.createCubeSet=function(){this._loadingSqureNow=this.createCube(),this._loadingSqureNow.scaleX=this._loadingSqureNow.scaleY=.5,this._loadingSqureNow.x=482,this._loadingSqureNow.y=-56+this._centerY+29,this._loadingSqurePre=this.createCube(),this._loadingSqurePre.x=482,this._loadingSqurePre.y=1100,this._loadingSqureNow.name="now",this._loadingSqurePre.name="pre",this._mask=new createjs.Shape,this._mask.graphics.beginFill("#FFFFFF").drawRect(0,0,100,100),this.addChild(this._mask)},e.createPercent=function(){this._loaderPercent=new ps.LoaderPercent,this.addChild(this._loaderPercent),this._loaderPercent.setDisplay(),this._loaderPercent.x=this._centerX-17,this._loaderPercent.y=this._centerY+8},e.createText=function(){this._text=new createjs.Bitmap(ps.DataMain.imgContainer.loadingTxt),this._txtComp=new createjs.Bitmap(ps.DataMain.imgContainer.txtLoadComp),this._text.x=-37+this._centerX,this._txtComp.x=-Math.floor(109*.45)+this._centerX,this._text.y=this._txtComp.y=23+this._centerY,this._txtComp.visible=!1,this._textDot1=new createjs.Bitmap(ps.DataMain.imgContainer.loadingDot),this._textDot2=new createjs.Bitmap(ps.DataMain.imgContainer.loadingDot),this._textDot3=new createjs.Bitmap(ps.DataMain.imgContainer.loadingDot),this._textDot1.x=34+this._centerX,this._textDot2.x=37+this._centerX,this._textDot3.x=40+this._centerX,this._textDot1.y=this._textDot2.y=this._textDot3.y=30+this._centerY,this.addChild(this._text),this.addChild(this._textDot1),this.addChild(this._textDot2),this.addChild(this._textDot3),this.addChild(this._txtComp)},e.createExclamation=function(){this._loadingExclamation=new createjs.Bitmap(ps.DataMain.imgContainer.exclamation),this.addChild(this._loadingExclamation),this._loadingExclamation.x=this._centerX-8,this._loadingExclamation.y=this._centerY-110+30,this._loadingExclamation.visible=!1,this._loadingExclamation.alpha=0},e.setPercent=function(){this._nowPercent=this._loadManager.getNowPercent(),this._percentCount<=this._nowPercent&&(this._percentCount+=this._percentCountNum,this._percentCount>=100&&(this._percentCount=100,this.stopAnimation(),this.setPercentComp()))},e.updateText=function(){this._loaderPercent.setPercent(this._percentCount);var t=2;switch(this._textNum++,this._textNum==4*t&&(this._textNum=0),this._textNum){case 0:this._textDot1.visible=this._textDot2.visible=this._textDot3.visible=!1;break;case 1*t:this._textDot2.visible=this._textDot3.visible=!1,this._textDot1.visible=!0;break;case 2*t:this._textDot3.visible=!1,this._textDot1.visible=this._textDot2.visible=!0;break;case 3*t:this._textDot1.visible=this._textDot2.visible=this._textDot3.visible=!0}},e.setPercentComp=function(){this._text.visible=!1,this._textDot1.visible=!1,this._textDot2.visible=!1,this._textDot3.visible=!1,this._txtCompTween=createjs.Tween.get(this._txtComp,{loop:!1}).wait(100).call(ps.Delegate.create(this,this.setTxtCompVisible),[!0])},e.setTxtCompVisible=function(t){this._txtComp.visible=t},e.update=function(){this._animate&&(this.setPercent(),this.updateText())},e.onInit=function(t){switch(t.now){case ps.BroadCaster.IMG_LOAD_INIT:_loadCompFlg=!0}},e.onCubeRotateAnimationEnd=function(){this._percentCount>=100&&!this._compAnimFlg&&this.setCompAnim()},e.destroy=function(){ps.BroadCaster.removeEventListener(ps.BroadCaster.INIT,ps.Delegate.create(this,this.onInit)),this.stopAnimation(),this._loaderPercent.destroy(),this.parent.removeChild(this),ps.Main.instance.setLoaderContent(null),this.stopTween(this._mainTween),this.stopTween(this._exclamationTween),this.stopTween(this._txtCompTween),this.stopTween(this._squreTweenThread),this.stopTween(this._squreTweenNow),this.stopTween(this._squreTweenPre),this._loadManager=null,this._text=null,this._textDot1=null,this._textDot2=null,this._textDot3=null,this._txtComp=null,this._textNum=3,this._animate=!1,this._loadingSqureNow=null,this._loadingSqurePre=null,this._loadingExclamation=null,this._mask=null},e.stopTween=function(t){t&&(t.pause(),t=null)},e.squreAnimThread=function(){this._squreTweenThread=createjs.Tween.get(this,{loop:!0}).wait(700).call(this.changeSqure)},e.changeSqure=function(){this.stopTween(this._squreTweenNow),this.stopTween(this._squreTweenPre),100!=this._percentCount&&(1==this._squreChnageNum?(this._loadingSqureNow.x=482,this._loadingSqurePre.x=482,this._loadingSqureNow.y=304,this._loadingSqurePre.y=1100,this._loadingSqurePre.scaleX=this._loadingSqurePre.scaleY=this._nowPercent/100*(1-this._squreFirstScale)+this._squreFirstScale,this._squreTweenNow=createjs.Tween.get(this._loadingSqureNow,{loop:!1,override:!0}).to({y:-100},500,createjs.Ease.cubicOut).call(ps.Delegate.create(this,this.changeSqureComp)),this._squreTweenPre=createjs.Tween.get(this._loadingSqurePre,{loop:!1,override:!0}).to({y:304},500,createjs.Ease.cubicOut)):(this._loadingSqureNow.x=482,this._loadingSqurePre.x=482,this._loadingSqureNow.y=1100,this._loadingSqurePre.y=304,this._loadingSqureNow.scaleX=this._loadingSqureNow.scaleY=this._nowPercent/100*(1-this._squreFirstScale)+this._squreFirstScale,this._squreTweenNow=createjs.Tween.get(this._loadingSqurePre,{loop:!1,override:!0}).to({y:-100},500,createjs.Ease.cubicOut).call(ps.Delegate.create(this,this.changeSqureComp)),this._squreTweenPre=createjs.Tween.get(this._loadingSqureNow,{loop:!1,override:!0}).to({y:304},500,createjs.Ease.cubicOut)),this._squreChnageNum=-1*this._squreChnageNum)},e.changeSqureComp=function(){this._percentCount>=100&&(this._cubeScrollAnimFlg=!0,this.stopTween(this._squreTweenThread),this.stopTween(this._squreTweenNow),this.stopTween(this._squreTweenPre))},e.setCompAnim=function(){var t=null;t=1==this._squreChnageNum?this._loadingSqureNow.getChildAt(0):this._loadingSqurePre.getChildAt(0),t.gotoAndPlay("second"),this.exclamationAnim()},e.exclamationAnim=function(){this._loadingExclamation.visible=!0;var t=this._centerY-110;this._exclamationTween=createjs.Tween.get(this._loadingExclamation,{loop:!1,override:!0}).to({y:t,alpha:1},300,createjs.Ease.cubicOut).wait(800).call(ps.Delegate.create(this,this.exclamationAnimSecoond)),this.setCompAnimFlg()},e.setCompAnimFlg=function(){this._compAnimFlg=!0},e.exclamationAnimSecoond=function(){var t=this._centerY-110-20;this._exclamationTween=createjs.Tween.get(this._loadingExclamation,{loop:!1,override:!0}).to({y:t,alpha:0},700,createjs.Ease.cubicOut).call(ps.Delegate.create(this,this.exclamationAnimComp)),createjs.Tween.get(this._loaderPercent,{loop:!1,override:!0}).to({alpha:0},700,createjs.Ease.cubicOut),createjs.Tween.get(this._txtComp,{loop:!1,override:!0}).to({alpha:0},700,createjs.Ease.cubicOut)},e.exclamationAnimComp=function(){ps.Controller.setContentAnimEvent(ps.BroadCaster.CONTENTANIMATION_EVENT_START),this.destroy()},ps.Loader=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.Container;e.Container_initialize=e.initialize,e.initialize=function(){this.Container_initialize(),this.setParam()},e._cube=null,e._num1=null,e._num10=null,e._num100=null,e._numP=null,e._text=null,e.setParam=function(){},e.setDisplay=function(){this.x=-15,this.y=8;var t=8;this._num1=new ps.LoaderPercentNum,this._num10=new ps.LoaderPercentNum,this._num100=new ps.LoaderPercentNum,this._numP=new ps.LoaderPercentNum,this._num1.setDisplay(),this._num10.setDisplay(),this._num100.setDisplay(),this._numP.setDisplay(),this._num1.setNum(0),this._num10.setNum(0),this._num100.setNum(0),this._numP.setNum("%"),this._num1.x=2*t,this._num10.x=t,this._num100.x=0,this._numP.x=3*t+1,this.addChild(this._num1),this.addChild(this._num10),this.addChild(this._num100),this.addChild(this._numP)},e.setPercent=function(t){this._num1.setNum(Math.floor(t%10)),this._num10.setNum(Math.floor(t/10)%10),this._num100.setNum(Math.floor(t/100))},e.destroy=function(){this._num1.destroy(),this._num10.destroy(),this._num100.destroy(),this._numP.destroy(),this._cube=null,this._num1=null,this._num10=null,this._num100=null,this._numP=null},ps.LoaderPercent=t}(),this.ps=this.ps||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.Container;e.Container_initialize=e.initialize,e.initialize=function(){this.Container_initialize(),this.setParam(),this.setDisplay()},e._num0=null,e._num1=null,e._num2=null,e._num3=null,e._num4=null,e._num5=null,e._num6=null,e._num7=null,e._num8=null,e._num9=null,e._numP=null,e.setParam=function(){},e.setDisplay=function(){for(var t=0;10>t;t++)this.setNumImg(t);this._numP=new createjs.Bitmap(ps.DataMain.imgContainer.txtP),this._numP.visible=!1,this._numP.x=0,this._numP.y=-1,this.addChild(this._numP)},e.setNumImg=function(t){var e=0,i=0;switch(t){case 3:e=-1,i=-1;break;case 4:e=-1,i=0;break;case 8:e=-1,i=0}this["_num"+t]=new createjs.Bitmap(ps.DataMain.imgContainer["txtNum"+t]),this["_num"+t].x=e,this["_num"+t].y=i,this["_num"+t].visible=!1,this.addChild(this["_num"+t])},e.setNum=function(t){for(var e=0;10>e;e++)this["_num"+e].visible=!1;this._numP.visible=!1,"%"==t?this._numP.visible=!0:this["_num"+t].visible=!0},e.destroy=function(){this._num0=null,this._num1=null,this._num2=null,this._num3=null,this._num4=null,this._num5=null,this._num6=null,this._num7=null,this._num8=null,this._num9=null,this._numP=null},ps.LoaderPercentNum=t}();